---
layout: post
title: "YDWE支持新的地图格式"
date: 2018-06-15 11:06:00 +0800
comments: true
author: actboy168
categories: YDWE
---

在最近发布的YDWE中，加入了一种全新的地图格式。这让很多不可能的功能成为了可能。

<!-- more -->

> 为什么需要新的格式？

w3x格式的地图有诸多的缺陷，首要的一点是w3x格式是blz的私有格式，过于封闭，使用w3x格式意味着你无缘这个世界上的大多数的工具，只能使用非常有限的几种工具，例如WE、MpqEditor、HKE等，这实在是太可怕了。此外，w3x格式实际上是blz针对地图运行时优化的格式，完全没有考虑过地图编辑时的感受；例如将多个小文件打包为大文件以提高硬盘读写的性能，这种特性在编辑时几乎是没有用的，至少它是大大牺牲了地图的可编辑性。

而新格式的目标，正是尽可能地移除私有格式，让你可以尽可能享用这个世界上各种优秀的通用工具来编辑管理你的地图。请记住一点，使用新格式，**YDWE不再是你编辑地图的唯一手段**。这也是我最希望看到的效果。

> 新的格式有什么功能？

新格式（以下把它称为Lni格式）它首先是一个文件夹，而非一个文件。这意味着，你不再需要YDWE里的输入管理器（但你依然可以用），我相信Windows的资源管理器会有你想要的一切功能。此外，Lni格式还会对你地图的文件作一个简单的分类

* table，物编数据表，war3map.w3*等文件转换的lni格式
* scripts，脚本文件，地图内scripts目录的文件会放在之里
* tirgger，触发器文件，war3map.wtg/war3map.wct文件转换的lml格式
* source，声音文件，后缀名是mp3、wav的文件
* resource，资源文件，后缀名是mdx、mdl、blp、tga的文件
* map，其它，没分类到以上类别的文件

Lni格式除了移除了mpq的私有格式外，还将物编和触发的格式改为了文本格式。你甚至可以用文本编辑器来修改物编和触发。

> 多人协作编辑地图

多人合作是一个不可避免的问题。也许你只会些制作地图的某些环节，比如脚本、触发、数值、地形、特效、美术等。一个人要精通这些所有的环节非常的困难，即是全都精通，当你想要制作优质的地图时，还是需要多几个人来为你分忧。然而w3x格式的地图多人协作简直就是噩梦。基本上都是同一时间只能有一个人在编辑地图，通过QQ群的方式告知其他人不要改地图我在改之类的。

Lni格式可以让你充分利用各种成熟的版本管理工具，大大改善多人协作的体验。以主流的git为例，现在有很多免费的git托管服务，使用起来非常简单。

* https://github.com/ 目前世界上最大的git托管服务提供商，YDWE的代码也是使用它里管理。缺点：没有中文界面，实际上都是非常简单的英文；不支持免费的私有项目，也就是说你的地图会被所有人看到。

* http://www.gitlab.org/ 缺点：没有中文界面；没有github稳定。优点：支持私有项目。

* http://git.oschina.net/ 缺点：国内的服务提供商。优点：中文界面，支持私有项目。

至于git的使用，要说的东西很多，支持git工具也很多，你可以自行从网上学习更多的知识。

> 让你的地图不再丢失

使用git托管服务之后，还有一个好处是，你的地图不再会丢失。地图储存在服务器上，硬盘损坏、U盘丢失、不小心误删、保存错误找不到备份，这些事情都不再会发生。只要有网络和YDWE，你就可以随时开始编辑地图，以及随时保存你的工作结果。

> 如何开始使用Lni格式？

两种方法

1. w3x2lni可以将你的地图从w3x转为Lni格式。也可以转回去。
2. YDWE里打开地图，另存为，将地图文件名改为'.w3x'，保存即可生成为Lni格式地图。同理Lni格式地图另存为，改个地图名就可以保存回w3x格式地图。

在Lni格式的根目录，会有一个'.w3x'的文件，用YDWE打开它就是打开Lni格式的地图。

> Lni格式的未来

1. 更多私有格式的转换，包括地形、声音、地图预制单位等
2. 模型文件的管理，自动管理贴图路径等

> 最后

我希望所有的人都来使用Lni格式来编辑地图，你将会拥有一个全新的视角看待你的地图。
